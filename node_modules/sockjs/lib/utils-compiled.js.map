{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.3\n(function() {\n  var array_intersection, crypto, escapable, lookup, unroll_lookup;\n\n  crypto = require('crypto');\n\n  exports.array_intersection = array_intersection = function(arr_a, arr_b) {\n    var a, j, len, r;\n    r = [];\n    for (j = 0, len = arr_a.length; j < len; j++) {\n      a = arr_a[j];\n      if (arr_b.indexOf(a) !== -1) {\n        r.push(a);\n      }\n    }\n    return r;\n  };\n\n  exports.escape_selected = function(str, chars) {\n    var c, i, j, l, len, map, parts, r, ref, v;\n    map = {};\n    chars = '%' + chars;\n    for (j = 0, len = chars.length; j < len; j++) {\n      c = chars[j];\n      map[c] = escape(c);\n    }\n    r = new RegExp('([' + chars + '])');\n    parts = str.split(r);\n    for (i = l = 0, ref = parts.length; 0 <= ref ? l < ref : l > ref; i = 0 <= ref ? ++l : --l) {\n      v = parts[i];\n      if (v.length === 1 && v in map) {\n        parts[i] = map[v];\n      }\n    }\n    return parts.join('');\n  };\n\n  exports.buffer_concat = function(buf_a, buf_b) {\n    var dst;\n    dst = new Buffer(buf_a.length + buf_b.length);\n    buf_a.copy(dst);\n    buf_b.copy(dst, buf_a.length);\n    return dst;\n  };\n\n  exports.md5_hex = function(data) {\n    return crypto.createHash('md5').update(data).digest('hex');\n  };\n\n  exports.sha1_base64 = function(data) {\n    return crypto.createHash('sha1').update(data).digest('base64');\n  };\n\n  exports.timeout_chain = function(arr) {\n    var fun, ref, timeout, user_fun;\n    arr = arr.slice(0);\n    if (!arr.length) {\n      return;\n    }\n    ref = arr.shift(), timeout = ref[0], user_fun = ref[1];\n    fun = (function(_this) {\n      return function() {\n        user_fun();\n        return exports.timeout_chain(arr);\n      };\n    })(this);\n    return setTimeout(fun, timeout);\n  };\n\n  exports.objectExtend = function(dst, src) {\n    var k;\n    for (k in src) {\n      if (src.hasOwnProperty(k)) {\n        dst[k] = src[k];\n      }\n    }\n    return dst;\n  };\n\n  exports.overshadowListeners = function(ee, event, handler) {\n    var new_handler, old_listeners;\n    old_listeners = ee.listeners(event).slice(0);\n    ee.removeAllListeners(event);\n    new_handler = function() {\n      var j, len, listener;\n      if (handler.apply(this, arguments) !== true) {\n        for (j = 0, len = old_listeners.length; j < len; j++) {\n          listener = old_listeners[j];\n          listener.apply(this, arguments);\n        }\n        return false;\n      }\n      return true;\n    };\n    return ee.addListener(event, new_handler);\n  };\n\n  escapable = /[\\x00-\\x1f\\ud800-\\udfff\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufff0-\\uffff]/g;\n\n  unroll_lookup = function(escapable) {\n    var c, i, unrolled;\n    unrolled = {};\n    c = (function() {\n      var j, results;\n      results = [];\n      for (i = j = 0; j < 65536; i = ++j) {\n        results.push(String.fromCharCode(i));\n      }\n      return results;\n    })();\n    escapable.lastIndex = 0;\n    c.join('').replace(escapable, function(a) {\n      return unrolled[a] = '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    });\n    return unrolled;\n  };\n\n  lookup = unroll_lookup(escapable);\n\n  exports.quote = function(string) {\n    var quoted;\n    quoted = JSON.stringify(string);\n    escapable.lastIndex = 0;\n    if (!escapable.test(quoted)) {\n      return quoted;\n    }\n    return quoted.replace(escapable, function(a) {\n      return lookup[a];\n    });\n  };\n\n  exports.parseCookie = function(cookie_header) {\n    var cookie, cookies, j, len, parts, ref;\n    cookies = {};\n    if (cookie_header) {\n      ref = cookie_header.split(';');\n      for (j = 0, len = ref.length; j < len; j++) {\n        cookie = ref[j];\n        parts = cookie.split('=');\n        cookies[parts[0].trim()] = (parts[1] || '').trim();\n      }\n    }\n    return cookies;\n  };\n\n  exports.random32 = function() {\n    var foo, v;\n    foo = crypto.randomBytes(4);\n    v = [foo[0], foo[1], foo[2], foo[3]];\n    return v[0] + (v[1] * 256) + (v[2] * 256 * 256) + (v[3] * 256 * 256 * 256);\n  };\n\n}).call(this);\n"]}